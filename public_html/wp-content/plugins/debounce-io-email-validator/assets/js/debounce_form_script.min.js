!function(a){"use strict";var b={el:"",msgContainer:!1,validMails:[],submit:function(){var b=this;a(b.el).trigger("submit")},request:function(b){if(!a("body").hasClass("debounce-loading")){var c=this;a("body").addClass("debounce-loading");var d=a(c.el).find(".debounce-mail");_.each(a(d),function(c,d){a(c).val()==b&&a(c).addClass("debounce-loading-mail")}),a.ajax({url:debounce.AJAX_URL,type:"POST",cache:!1,crossDomain:!0,data:{action:"debounce-verify-email","debounce-nonce":debounce.nonce,email:b},dataType:"json",success:function(d){a("body").removeClass("debounce-loading");var e=a(c.el).find(".debounce-mail");_.each(a(e),function(c,d){a(c).val()==b&&a(c).removeClass("debounce-loading-mail")}),d.is_valid?(c.validMails.push(b),c.submit()):c.showError(b,d.status)},error:function(){a("body").removeClass("debounce-loading")}})}},validateForm:function(c){var d=this,e=a(c).find(".debounce-mail");d.el=c,a(d.el).find(".wpcf7-response-output").length?d.msgContainer=a(d.el).find(".wpcf7-response-output"):d.msgContainer=!1;var f=[],e=a(c).find(".debounce-mail");if(_.each(e,function(b,c){f.push(a(e[c]).val())}),_.isEmpty(_.difference(f,b.validMails)))d.submit();else{var g=_.difference(f,b.validMails);d.request(g[0])}},showError:function(b,c){var d=this;if(d.msgContainer){var e=_.template(debounce.tpl);a(d.msgContainer).html(e({mail:b,status:debounce[c]})).show()}else{var f=a(d.el).find(".debounce-mail");_.each(a(f),function(d,e){if(a(d).val()==b){var f=_.template(debounce.tpl);a(d).after(f({mail:b,status:debounce[c]}))}})}}};a(document).ready(function(){a("form").length&&_.each(a("form"),function(c,d){a(c).find(".debounce-mail").length&&a(c).on("submit",function(){var d=[],e=a(c).find(".debounce-mail");return a(c).find(".debounce-error").remove(),_.each(e,function(b,c){d.push(a(e[c]).val())}),_.isEmpty(_.difference(d,b.validMails))?(a(c).removeClass(debounce.form_class),!0):(b.validateForm(a(c)),!1)})})})}(jQuery);